{"version":3,"sources":["src/app.js","src/auth-config.js","src/environment.js","src/main.js","src/modules/home.js","src/modules/list.js","src/resources/index.js","src/resources/data/data-services.js","src/resources/data/todos.js","src/resources/data/users.js","src/resources/elements/flatpickr.js","src/resources/value-converters/completed.js","src/resources/value-converters/date-format.js"],"names":["App","configureRouter","config","router","addPipelineStep","map","route","moduleId","name","auth","authConfig","baseUrl","loginUrl","tokenName","authHeader","authToken","logoutRedirect","debug","testing","configure","window","regeneratorRuntime","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","plugin","baseConfig","feature","developmentLogging","start","then","setRoot","Home","users","message","loginError","showLogin","login","email","password","sessionStorage","setItem","JSON","stringify","response","user","navigate","catch","console","log","error","showRegister","firstName","lastName","registerError","save","serverResponse","List","todos","parse","getItem","showList","showCompleted","priorities","logout","removeItem","activate","getUserTodos","_id","toggleShowCompleted","createTodo","todoObj","todo","description","dateDue","Date","priority","back","editTodo","deleteTodo","completeTodo","completed","saveTodo","changeFiles","filesToUpload","Array","push","files","removeFile","index","splice","alert","todoId","length","uploadFile","globalResources","DataServices","http","httpClient","BASE_URL","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","method","url","status","get","fetch","json","data","post","content","body","object","put","delete","uploadFiles","ToDos","TODOS_SERVICE","todosArray","id","i","userId","formData","FormData","forEach","item","append","Users","USER_SERVICE","TODO_SERVICE","FlatPickerCustomElement","Element","defaultBindingMode","twoWay","element","bind","defaultConfig","altInput","altFormat","wrap","_config","Object","assign","onChange","onMonthChange","onYearChange","attached","flatpickr","querySelector","selectedDates","dateStr","instance","value","valueChanged","newDate","undefined","setDate","CompletedValueConverter","toView","array","filter","DateFormatValueConverter","format"],"mappings":";;;;;;;;;;;;;;MAEaA,cAAAA;;;;;kBACXC,2CAAgBC,QAAQC,QAAQ;AAC9B,WAAKA,MAAL,GAAcA,MAAd;AACAD,aAAOE,eAAP,CAAuB,WAAvB;AACAF,aAAOG,GAAP,CAAW,CACT;AACEC,eAAO,CAAC,EAAD,EAAK,MAAL,CADT;AAEEC,kBAAU,gBAFZ;AAGEC,cAAM;AAHR,OADS,EAMT;AACEF,eAAO,MADT;AAEEC,kBAAU,gBAFZ;AAGEC,cAAM,MAHR;AAIEC,cAAM;AAJR,OANS,CAAX;AAaD;;;;;;;;;;;ACnBH,MAAIC,aAAa;AACfC,aAAS,2BADM;AAEfC,cAAU,cAFK;AAGfC,eAAW,OAHI;AAIfC,gBAAY,eAJG;AAKfC,eAAW,EALI;AAMfC,oBAAgB;AAND,GAAjB;;oBASeN;;;;;;;;oBCTA;AACbO,WAAO,IADM;AAEbC,aAAS;AAFI;;;;;;;;UCSCC,YAAAA;;;;;;;;;;;;;;AANhBC,SAAOC,kBAAP;;AAIAC,UAAQpB,MAAR,CAAe,EAAGqB,UAAU,EAAKC,kBAAkB,KAAvB,EAAb,EAAf;;AAEO,WAASL,SAAT,CAAmBM,OAAnB,EAA4B;AACjCA,YAAQC,GAAR,CACGC,qBADH,GAEGC,MAFH,CAEU,cAFV,EAE0B,UAACC,UAAD,EAAc;AACpCA,iBAAWV,SAAX;AACD,KAJH,EAKGW,OALH,CAKW,WALX;;AAOA,QAAI,sBAAYb,KAAhB,EAAuB;AACrBQ,cAAQC,GAAR,CAAYK,kBAAZ;AACD;;AAED,QAAI,sBAAYb,OAAhB,EAAyB;AACvBO,cAAQC,GAAR,CAAYE,MAAZ,CAAmB,iBAAnB;AACD;;AAEDH,YAAQO,KAAR,GAAgBC,IAAhB,CAAqB;AAAA,aAAMR,QAAQS,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCnBYC,eAAAA,eADZ;AAGC,kBAAYhC,MAAZ,EAAoBiC,KAApB,EAA2B3B,IAA3B,EAAiC;AAAA;;AAC/B,WAAKN,MAAL,GAAcA,MAAd;AACA,WAAKiC,KAAL,GAAaA,KAAb;AACA,WAAKC,OAAL,GAAe,MAAf;AACA,WAAK5B,IAAL,GAAYA,IAAZ;AACA,WAAK6B,UAAL,GAAkB,EAAlB;AACA,WAAKC,SAAL,GAAiB,IAAjB;AACD;;mBAEDC,yBAAQ;AAAA;;AACN,aAAO,KAAK/B,IAAL,CAAU+B,KAAV,CAAgB,KAAKC,KAArB,EAA4B,KAAKC,QAAjC,EACJT,IADI,CACC,oBAAY;AAChBU,uBAAeC,OAAf,CAAuB,MAAvB,EAA+BC,KAAKC,SAAL,CAAeC,SAASC,IAAxB,CAA/B;AACA,cAAKV,UAAL,GAAkB,EAAlB;AACA,cAAKnC,MAAL,CAAY8C,QAAZ,CAAqB,MAArB;AACD,OALI,EAMJC,KANI,CAME,iBAAS;AACdC,gBAAQC,GAAR,CAAYC,KAAZ;AACA,cAAKf,UAAL,GAAkB,sBAAlB;AACD,OATI,CAAP;AAUD;;mBAEDgB,uCAAc;AACZ,WAAKN,IAAL,GAAY;AACVO,mBAAW,EADD;AAEVC,kBAAU,EAFA;AAGVf,eAAO,EAHG;AAIVC,kBAAU;AAJA,OAAZ;;AAOA,WAAKe,aAAL,GAAqB,EAArB;AACA,WAAKlB,SAAL,GAAiB,KAAjB;AACD;;mBAEKmB;;;;;;;;uBACuB,KAAKtB,KAAL,CAAWsB,IAAX,CAAgB,KAAKV,IAArB;;;AAAvBW;;AACJ,oBAAI,CAACA,eAAeN,KAApB,EAA2B;AACzB,uBAAKd,SAAL,GAAiB,IAAjB;AACD,iBAFD,MAEO;AACL,uBAAKkB,aAAL,GAAqB,2CAArB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC3CQG,eAAAA,eADZ;AAEC,kBAAYzD,MAAZ,EAAoBM,IAApB,EAA0BoD,KAA1B,EAAiC;AAAA;;AAC/B,WAAKA,KAAL,GAAaA,KAAb;;AAEA,WAAK1D,MAAL,GAAcA,MAAd;AACA,WAAKkC,OAAL,GAAe,MAAf;AACA,WAAK5B,IAAL,GAAYA,IAAZ;;AAEA,WAAKuC,IAAL,GAAYH,KAAKiB,KAAL,CAAWnB,eAAeoB,OAAf,CAAuB,MAAvB,CAAX,CAAZ;AACA,WAAKC,QAAL,GAAgB,IAAhB;AACA,WAAKC,aAAL,GAAqB,KAArB;;AAEA,WAAKC,UAAL,GAAkB,CAAC,KAAD,EAAQ,QAAR,EAAkB,MAAlB,EAA0B,UAA1B,CAAlB;AACD;;mBAEDC,2BAAQ;AACNxB,qBAAeyB,UAAf,CAA0B,MAA1B;AACA,WAAK3D,IAAL,CAAU0D,MAAV;AACD;;mBAEKE;;;;;;;uBACE,KAAKR,KAAL,CAAWS,YAAX,CAAwB,KAAKtB,IAAL,CAAUuB,GAAlC;;;;;;;;;;;;;;;;;mBAGRC,qDAAqB;AACnB,WAAKP,aAAL,GAAqB,CAAC,KAAKA,aAA3B;AACD;;mBAEDQ,mCAAY;AACV,WAAKC,OAAL,GAAe;AACbC,cAAM,EADO;AAEbC,qBAAa,EAFA;AAGbC,iBAAS,IAAIC,IAAJ,EAHI;AAIb9B,cAAM,KAAKA,IAAL,CAAUuB,GAJH;AAKbQ,kBAAU,KAAKb,UAAL,CAAgB,CAAhB;AALG,OAAf;AAOA,WAAKF,QAAL,GAAgB,KAAhB;AACD;;mBAEDgB,uBAAO;AAEL,WAAKhB,QAAL,GAAgB,IAAhB;AACD;;mBAEDiB,6BAASN,MAAK;AACZ,WAAKD,OAAL,GAAeC,IAAf;AACA,WAAKX,QAAL,GAAgB,KAAhB;AACD;;mBAEDkB,iCAAWP,MAAK;AACd,WAAKd,KAAL,CAAWqB,UAAX,CAAsBP,KAAKJ,GAA3B;AACD;;mBAEDY,qCAAaR,MAAK;AAChBA,WAAKS,SAAL,GAAiB,CAACT,KAAKS,SAAvB;AACA,WAAKV,OAAL,GAAeC,IAAf;AACA,WAAKU,QAAL;AACD;;mBAEDC,qCAAa;AACX,WAAKC,aAAL,GAAqB,IAAIC,KAAJ,EAArB;AACA,WAAKD,aAAL,CAAmBE,IAAnB,CAAwB,KAAKC,KAAL,CAAW,CAAX,CAAxB;AACD;;mBAEDC,iCAAWC,OAAM;AACf,WAAKL,aAAL,CAAmBM,MAAnB,CAA0BD,KAA1B,EAAgC,CAAhC;AACD;;mBAEKP;;;;;;;qBACD,KAAKX;;;;;;uBACe,KAAKb,KAAL,CAAWH,IAAX,CAAgB,KAAKgB,OAArB;;;AAAjB3B;;qBACDA,SAASM;;;;;AACVyC,sBAAM,sCAAN;;;;;AAEIC,yBAAShD,SAASwB;;sBACnB,KAAKgB,aAAL,IAAsB,KAAKA,aAAL,CAAmBS;;;;;;uBACpC,KAAKnC,KAAL,CAAWoC,UAAX,CAAsB,KAAKV,aAA3B,EAA0C,KAAKvC,IAAL,CAAUuB,GAApD,EAAyDwB,MAAzD;;;AACN,qBAAKR,aAAL,GAAqB,EAArB;;;AAGJ,qBAAKvB,QAAL,GAAgB,IAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;UCtFU7C,YAAAA;AAAT,WAASA,SAAT,CAAmBjB,MAAnB,EAA2B;AAChCA,WAAOgG,eAAP,CAAuB,CACrB,sCADqB,EAErB,wCAFqB,EAGrB,8BAHqB,CAAvB;AAKD;;;;;;;;;;;;;;;;;;MCFYC,uBAAAA,uBADZ;AAGC,0BAAYC,IAAZ,EAAkB;AAAA;;AAAA;;AAChB,WAAKC,UAAL,GAAkBD,IAAlB;AACA,WAAKE,QAAL,GAAgB,4BAAhB;;AAEA,WAAKD,UAAL,CAAgBlF,SAAhB,CAA0B,kBAAU;AAClCjB,eACGqG,WADH,CACe,MAAKD,QADpB,EAEGE,YAFH,CAEgB;AACZC,uBAAa,aADD;AAEZC,mBAAS;AACP,sBAAU,kBADH;AAEP,gCAAoB;AAFb;AAFG,SAFhB,EASGC,eATH,CASmB;AACfC,iBADe,mBACPA,QADO,EACE;AACfzD,oBAAQC,GAAR,iBAA0BwD,SAAQC,MAAlC,SAA4CD,SAAQE,GAApD;AACA,mBAAOF,QAAP;AACD,WAJc;AAKf7D,kBALe,oBAKNA,SALM,EAKI;AACjBI,oBAAQC,GAAR,eAAwBL,UAASgE,MAAjC,SAA2ChE,UAAS+D,GAApD;AACA,mBAAO/D,SAAP;AACD;AARc,SATnB;AAmBD,OApBD;AAqBD;;2BAEDiE,mBAAIF,KAAK;AACP,aAAO,KAAKT,UAAL,CAAgBY,KAAhB,CAAsBH,GAAtB,EACJ7E,IADI,CACC;AAAA,eAAYc,SAASmE,IAAT,EAAZ;AAAA,OADD,EAEJjF,IAFI,CAEC,gBAAQ;AACZ,eAAOkF,IAAP;AACD,OAJI,EAKJjE,KALI,CAKE,iBAAS;AACd,eAAOG,KAAP;AACD,OAPI,CAAP;AAQD;;2BAED+D,qBAAKC,SAASP,KAAK;AACjB,aAAO,KAAKT,UAAL,CACJY,KADI,CACEH,GADF,EACO;AACVD,gBAAQ,MADE;AAEVS,cAAM,8BAAKD,OAAL;AAFI,OADP,EAKJpF,IALI,CAKC;AAAA,eAAYc,SAASmE,IAAT,EAAZ;AAAA,OALD,EAMJjF,IANI,CAMC,kBAAU;AACd,eAAOsF,MAAP;AACD,OARI,EASJrE,KATI,CASE,iBAAS;AACd,eAAOG,KAAP;AACD,OAXI,CAAP;AAYD;;2BAEDmE,mBAAIH,SAASP,KAAK;AAChB,aAAO,KAAKT,UAAL,CACJY,KADI,CACEH,GADF,EACO;AACVD,gBAAQ,KADE;AAEVS,cAAM,8BAAKD,OAAL;AAFI,OADP,EAKJpF,IALI,CAKC;AAAA,eAAYc,SAASmE,IAAT,EAAZ;AAAA,OALD,EAMJjF,IANI,CAMC,kBAAU;AACd,eAAOsF,MAAP;AACD,OARI,EASJrE,KATI,CASE,iBAAS;AACd,eAAOG,KAAP;AACD,OAXI,CAAP;AAYD;;2BAEDoE,0BAAOX,KAAK;AACV,aAAO,KAAKT,UAAL,CACJY,KADI,CACEH,GADF,EACO;AACVD,gBAAQ;AADE,OADP,EAIJ5E,IAJI,CAIC;AAAA,eAAYc,SAASmE,IAAT,EAAZ;AAAA,OAJD,EAKJjF,IALI,CAKC,kBAAU;AACd,eAAOsF,MAAP;AACD,OAPI,EAQJrE,KARI,CAQE,iBAAS;AACd,eAAOG,KAAP;AACD,OAVI,CAAP;AAWD;;2BAEDqE,mCAAYhC,OAAOoB,KAAI;AACrB,aAAO,KAAKT,UAAL,CACJY,KADI,CACEH,GADF,EACO;AACVD,gBAAQ,MADE;AAEVS,cAAM5B;AAFI,OADP,EAKJzD,IALI,CAKC;AAAA,eAAYc,SAASmE,IAAT,EAAZ;AAAA,OALD,EAMJjF,IANI,CAMC,kBAAU;AACd,eAAOsF,MAAP;AACD,OARI,EASJrE,KATI,CASE,iBAAS;AACd,eAAOG,KAAP;AACD,OAXI,CAAP;AAYD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCjGUsE,gBAAAA,gBADZ;AAGC,mBAAYR,IAAZ,EAAkB;AAAA;;AAChB,WAAKA,IAAL,GAAYA,IAAZ;AACA,WAAKS,aAAL,GAAqB,OAArB;;AAEA,WAAKC,UAAL,GAAkB,EAAlB;AACD;;oBAEKvD;4EAAawD;;;;;;;uBACI,KAAKX,IAAL,CAAUH,GAAV,CAAc,KAAKY,aAAL,GAAqB,QAArB,GAAgCE,EAA9C;;;AAAjB/E;;AACJ,oBAAG,CAACA,SAASM,KAAV,IAAmB,CAACN,SAASV,OAAhC,EAAwC;AACtC,uBAAKwF,UAAL,GAAkB9E,QAAlB;AACD;;;;;;;;;;;;;;;;;oBAGGW;8EAAKiB;;;;;;;qBACLA;;;;;oBACGA,KAAKJ;;;;;;uBACa,KAAK4C,IAAL,CAAUC,IAAV,CAAezC,IAAf,EAAqB,KAAKiD,aAA1B;;;AAAjB7E;;AACJ,oBAAI,CAACA,SAASM,KAAd,EAAqB;AACnB,uBAAKwE,UAAL,CAAgBpC,IAAhB,CAAqB1C,QAArB;AACD;kDACMA;;;;uBAEc,KAAKoE,IAAL,CAAUK,GAAV,CAAc7C,IAAd,EAAoB,KAAKiD,aAAL,GAAqB,GAArB,GAA2BjD,KAAKJ,GAApD;;;AAAjBxB;;AACJ,oBAAI,CAACA,UAASM,KAAd,EAAqB,CAEpB;kDACMN;;;;;;;;;;;;;;;;;oBAKPmC;8EAAW4C;;;;;;;uBACM,KAAKX,IAAL,CAAUM,MAAV,CAAiB,KAAKG,aAAL,GAAqB,GAArB,GAA2BE,EAA5C;;;AAAjB/E;;AACJ,oBAAG,CAACA,SAASM,KAAb,EAAmB;AACjB,uBAAQ0E,CAAR,GAAY,CAAZ,EAAeA,IAAI,KAAKF,UAAL,CAAgB7B,MAAnC,EAA2C+B,GAA3C,EAA+C;AAC7C,wBAAG,KAAKF,UAAL,CAAgBE,CAAhB,EAAmBxD,GAAnB,KAA2BuD,EAA9B,EAAiC;AAC/B,2BAAKD,UAAL,CAAgBhC,MAAhB,CAAuBkC,CAAvB,EAAyB,CAAzB;AACD;AACF;AACF;;;;;;;;;;;;;;;;;oBAGG9B;8EAAWP,OAAOsC,QAAQjC;;;;;;AAC1BkC,2BAAW,IAAIC,QAAJ;;AACfxC,sBAAMyC,OAAN,CAAc,UAACC,IAAD,EAAOxC,KAAP,EAAiB;AAC7BqC,2BAASI,MAAT,CAAgB,SAASzC,KAAzB,EAAgCwC,IAAhC;AACD,iBAFD;;;uBAIqB,KAAKjB,IAAL,CAAUO,WAAV,CAAsBO,QAAtB,EAAgC,KAAKL,aAAL,GAAwB,UAAxB,GAAqCI,MAArC,GAA8C,GAA9C,GAAoDjC,MAApF;;;AAAjBhD;kDACGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCpDEuF,gBAAAA,gBADZ;AAEC,mBAAYnB,IAAZ,EAAkB;AAAA;;AAChB,WAAKA,IAAL,GAAYA,IAAZ;AACA,WAAKoB,YAAL,GAAoB,OAApB;AACD;;oBAEK7E;4EAAKiB;;;;;;qBACNA;;;;;;uBAC0B,KAAKwC,IAAL,CAAUC,IAAV,CAAepE,IAAf,EAAqB,KAAKwF,YAA1B;;;AAAvB7E;iDACGA;;;;;;;;;;;;;;;;;oBAILD;8EAAKV;;;;;;qBACNA;;;;;;uBAC0B,KAAKmE,IAAL,CAAUC,IAAV,CAAepE,IAAf,EAAqB,KAAKuF,YAA1B;;;AAAvB5E;kDACGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MChBA8E,kCAAAA,kCADZ,8BAAOC,OAAP,WAGE,gCAAS,EAACC,oBAAoB,8BAAYC,MAAjC,EAAT;AACD,qCAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AACnB,WAAKA,OAAL,GAAeA,OAAf;AACD;;sCAEDC,uBAAO;AACL,UAAMC,gBAAgB;AACpBC,kBAAU,IADU;AAEpBC,mBAAW,QAFS;AAGpBC,cAAM;AAHc,OAAtB;AAKA,WAAKC,OAAL,GAAeC,OAAOC,MAAP,CAAc,EAAd,EAAkBN,aAAlB,CAAf;AACA,WAAKI,OAAL,CAAaG,QAAb,GAAwB,KAAKH,OAAL,CAAaI,aAAb,GAA6B,KAAKJ,OAAL,CAAaK,YAAb,GAA4B,KAAKF,QAAL,CAAcR,IAAd,CAAmB,IAAnB,CAAjF;AACD;;sCAEDW,+BAAW;AACT,WAAKC,SAAL,GAAiB,wBAAc,KAAKb,OAAL,CAAac,aAAb,CAA2B,oBAA3B,CAAd,EAAgE,KAAKR,OAArE,CAAjB;AACD;;sCAEDG,6BAASM,eAAeC,SAASC,UAAU;AACzC,WAAKC,KAAL,GAAaH,cAAc,CAAd,CAAb;AACD;;sCAEDI,uCAAe;AACb,UAAI,CAAC,KAAKN,SAAV,EAAqB;AACnB;AACD;AACD,UAAI,KAAKK,KAAL,KAAe,KAAKL,SAAL,CAAeE,aAAf,CAA6B,CAA7B,CAAnB,EAAmD;AACjD;AACD;AACD,UAAIK,UAAU,KAAKF,KAAL,GAAa,KAAKA,KAAlB,GAA0BG,SAAxC;AACA,WAAKR,SAAL,CAAeS,OAAf,CAAuBF,OAAvB;AACD;;;;;;;;;;;;;;;;;;;;;MCtCUG,kCAAAA;;;;;sCACXC,yBAAOC,OAAOP,OAAO;AACnB,UAAG,CAACA,KAAJ,EAAU;AACR,eAAOO,MAAMC,MAAN,CAAa,gBAAQ;AAC1B,iBAAO,CAACnC,KAAKhD,SAAb;AACD,SAFM,CAAP;AAGD,OAJD,MAIO;AACL,eAAOkF,KAAP;AACD;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;MCPUE,mCAAAA;;;;;uCACXH,yBAAON,OAAO;AACZ,UAAGA,UAAUG,SAAV,IAAuBH,UAAU,IAApC,EAAyC;AACvC;AACD;;AAED,aAAO,sBAAOA,KAAP,EAAcU,MAAd,CAAqB,aAArB,CAAP;AACD","file":"app-bundle.js","sourcesContent":["import { AuthorizeStep } from 'aurelia-auth';\n\nexport class App {\n  configureRouter(config, router) {\n    this.router = router;\n    config.addPipelineStep('authorize', AuthorizeStep);\n    config.map([\n      {\n        route: ['', 'home'],\n        moduleId: './modules/home',\n        name: 'Home'\n      },\n      {\n        route: 'list',\n        moduleId: './modules/list',\n        name: 'List',\n        auth: true\n      }\n    ]);\n  }\n}\n","var authConfig = {\n  baseUrl: \"http://localhost:5000/api\",\n  loginUrl: '/users/login',\n  tokenName: 'token',\n  authHeader: 'Authorization',\n  authToken: '',\n  logoutRedirect: '#/home'\n};\n\nexport default authConfig;\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport config from './auth-config';\nimport regeneratorRuntime from 'regenerator-runtime';\nwindow.regeneratorRuntime = regeneratorRuntime;\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({  warnings: {    wForgottenReturn: false  }});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-auth', (baseConfig)=>{\n      baseConfig.configure(config);\n    })\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import { inject } from 'aurelia-framework';\nimport { Router } from 'aurelia-router';\nimport { Users } from '../resources/data/users';\nimport { AuthService } from 'aurelia-auth';\n\n\n@inject(Router, Users, AuthService)\nexport class Home {\n\n  constructor(router, users, auth) {\n    this.router = router;\n    this.users = users;\n    this.message = 'Home';\n    this.auth = auth;\n    this.loginError = '';\n    this.showLogin = true;\n  }\n\n  login() {\n    return this.auth.login(this.email, this.password)\n      .then(response => {\n        sessionStorage.setItem(\"user\", JSON.stringify(response.user));\n        this.loginError = \"\";\n        this.router.navigate('list');\n      })\n      .catch(error => {\n        console.log(error);\n        this.loginError = \"Invalid credentials.\";\n      });\n  };\n\n  showRegister(){\n    this.user = {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      password: \"\"\n    };\n\n    this.registerError = \"\";\n    this.showLogin = false;\n  }\n\n  async save() {\n    let serverResponse = await this.users.save(this.user);\n    if (!serverResponse.error) {\n      this.showLogin = true;\n    } else {\n      this.registerError = \"There was a problem registering the user.\"\n    }\n  }\n\n}\n","import {inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {ToDos} from '../resources/data/todos';\nimport {AuthService} from 'aurelia-auth';\n\n@inject(Router, AuthService, ToDos)\nexport class List {\n  constructor(router, auth, todos) {\n    this.todos = todos;\n\n    this.router = router;\n    this.message = 'List';\n    this.auth = auth;\n\n    this.user = JSON.parse(sessionStorage.getItem('user'));\n    this.showList = true;\n    this.showCompleted = false;\n\n    this.priorities = ['Low', 'Medium', 'High', 'Critical'];\n  }\n\n  logout(){\n    sessionStorage.removeItem('user');\n    this.auth.logout();\n  }\n\n  async activate() {\n    await this.todos.getUserTodos(this.user._id);\n  }\n\n  toggleShowCompleted(){\n    this.showCompleted = !this.showCompleted;\n  }\n\n  createTodo(){\n    this.todoObj = {\n      todo: \"\",\n      description: \"\",\n      dateDue: new Date(),\n      user: this.user._id,\n      priority: this.priorities[0]\n    };\n    this.showList = false;\n  }\n\n  back() {\n    //this.router.navigateBack();\n    this.showList = true;\n  }\n\n  editTodo(todo){\n    this.todoObj = todo;\n    this.showList = false;\n  }\n\n  deleteTodo(todo){\n    this.todos.deleteTodo(todo._id);\n  }\n\n  completeTodo(todo){\n    todo.completed = !todo.completed;\n    this.todoObj = todo;\n    this.saveTodo();\n  }\n\n  changeFiles(){\n    this.filesToUpload = new Array();\n    this.filesToUpload.push(this.files[0]);\n  }\n\n  removeFile(index){\n    this.filesToUpload.splice(index,1);\n  }\n\n  async saveTodo(){\n    if(this.todoObj){\n      let response = await this.todos.save(this.todoObj);\n      if(response.error){\n        alert(\"There was an error creating the ToDo\");\n      } else {\n        var todoId = response._id;\n        if(this.filesToUpload && this.filesToUpload.length){\n          await this.todos.uploadFile(this.filesToUpload, this.user._id, todoId);\n          this.filesToUpload = [];\n        }\n      }\n      this.showList = true;\n    }\n  }\n}\n","export function configure(config) {\n  config.globalResources([\n    'resources/value-converters/completed',\n    'resources/value-converters/date-format',\n    'resources/elements/flatpickr'\n  ]);\n}\n","import { inject } from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\n\n@inject(HttpClient)\nexport class DataServices {\n\n  constructor(http) {\n    this.httpClient = http;\n    this.BASE_URL = \"http://localhost:5000/api/\";\n\n    this.httpClient.configure(config => {\n      config\n        .withBaseUrl(this.BASE_URL)\n        .withDefaults({\n          credentials: 'same-origin',\n          headers: {\n            'Accept': 'application/json',\n            'X-Requested-With': 'Fetch'\n          }\n        })\n        .withInterceptor({\n          request(request) {\n            console.log(`Requesting ${request.method} ${request.url}`);\n            return request;\n          },\n          response(response) {\n            console.log(`Received ${response.status} ${response.url}`);\n            return response;\n          }\n        });\n    });\n  }\n\n  get(url) {\n    return this.httpClient.fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        return data;\n      })\n      .catch(error => {\n        return error;\n      });\n  }\n\n  post(content, url) {\n    return this.httpClient\n      .fetch(url, {\n        method: 'post',\n        body: json(content)\n      })\n      .then(response => response.json())\n      .then(object => {\n        return object;\n      })\n      .catch(error => {\n        return error;\n      });\n  }\n\n  put(content, url) {\n    return this.httpClient\n      .fetch(url, {\n        method: 'put',\n        body: json(content)\n      })\n      .then(response => response.json())\n      .then(object => {\n        return object;\n      })\n      .catch(error => {\n        return error;\n      });\n  }\n\n  delete(url) {\n    return this.httpClient\n      .fetch(url, {\n        method: 'delete'\n      })\n      .then(response => response.json())\n      .then(object => {\n        return object;\n      })\n      .catch(error => {\n        return error ;\n      });\n  }\n\n  uploadFiles(files, url){\n    return this.httpClient\n      .fetch(url, {\n        method: 'post',\n        body: files\n      })\n      .then(response => response.json())\n      .then(object => {\n        return object;\n      })\n      .catch(error => {\n        return error;\n      });\n  }\n\n}\n","import {inject} from 'aurelia-framework';\nimport {DataServices} from './data-services';\n\n@inject(DataServices)\nexport class ToDos {\n\n  constructor(data) {\n    this.data = data;\n    this.TODOS_SERVICE = 'todos';\n\n    this.todosArray = [];\n  }\n\n  async getUserTodos(id){\n    let response = await this.data.get(this.TODOS_SERVICE + \"/user/\" + id);\n    if(!response.error && !response.message){\n      this.todosArray = response;\n    }\n  }\n\n  async save(todo) {\n    if (todo) {\n      if (!todo._id) {\n        let response = await this.data.post(todo, this.TODOS_SERVICE);\n        if (!response.error) {\n          this.todosArray.push(response);\n        }\n        return response;\n      } else {\n        let response = await this.data.put(todo, this.TODOS_SERVICE + \"/\" + todo._id);\n        if (!response.error) {\n          // this.updateArray(response);\n        }\n        return response;\n      }\n    }\n  }\n\n  async deleteTodo(id){\n    let response = await this.data.delete(this.TODOS_SERVICE + \"/\" + id);\n    if(!response.error){\n      for(let i = 0; i < this.todosArray.length; i++){\n        if(this.todosArray[i]._id === id){\n          this.todosArray.splice(i,1);\n        }\n      }\n    }\n  }\n\n  async uploadFile(files, userId, todoId){\n    let formData = new FormData();\n    files.forEach((item, index) => {\n      formData.append(\"file\" + index, item);\n    });\n\n    let response = await this.data.uploadFiles(formData, this.TODOS_SERVICE + \u000b\t\t\"/upload/\" + userId + \"/\" + todoId);\n    return response;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {DataServices} from './data-services';\n\n@inject(DataServices)\nexport class Users {\n  constructor(data) {\n    this.data = data;\n    this.USER_SERVICE = 'users';\n  }\n\n  async save(todo){\n    if(todo){\n      let serverResponse = await this.data.post(user, this.TODO_SERVICE);\n      return serverResponse;\n    }\n  }\n\n  async save(user){\n    if(user){\n      let serverResponse = await this.data.post(user, this.USER_SERVICE);\n      return serverResponse;\n    }\n  }\n}\n","import { inject, bindable, bindingMode } from 'aurelia-framework';\nimport Flatpickr from 'flatpickr';\n\n@inject(Element)\nexport class FlatPickerCustomElement {\n\n  @bindable({defaultBindingMode: bindingMode.twoWay}) value;\n  constructor(element) {\n    this.element = element;\n  }\n\n  bind() {\n    const defaultConfig = {\n      altInput: true,\n      altFormat: \"F j, Y\",\n      wrap: true\n    };\n    this._config = Object.assign({}, defaultConfig);\n    this._config.onChange = this._config.onMonthChange = this._config.onYearChange = this.onChange.bind(this);\n  }\n\n  attached() {\n    this.flatpickr = new Flatpickr(this.element.querySelector('.aurelia-flatpickr'), this._config);\n  }\n\n  onChange(selectedDates, dateStr, instance) {\n    this.value = selectedDates[0]\n  }\n\n  valueChanged() {\n    if (!this.flatpickr) {\n      return;\n    }\n    if (this.value === this.flatpickr.selectedDates[0]){\n      return;\n    }\n    let newDate = this.value ? this.value : undefined;\n    this.flatpickr.setDate(newDate);\n  }\n}\n","export class CompletedValueConverter {\n  toView(array, value) {\n    if(!value){\n      return array.filter(item => {\n        return !item.completed;\n      })\n    } else {\n      return array;\n    }\n  }\n}\n","import moment from 'moment';\n\nexport class DateFormatValueConverter {\n  toView(value) {\n    if(value === undefined || value === null){\n      return;\n    }\n\n    return moment(value).format('MMM Do YYYY');\n  }\n}\n"],"sourceRoot":".."}